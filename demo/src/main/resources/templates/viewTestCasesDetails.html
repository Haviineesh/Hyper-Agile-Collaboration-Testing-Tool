<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>View Test Case Details</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>

<body>
    <div th:replace="fragments/navbar :: navbar"></div>

    <div class="container mt-4">
        <h2>View Test Case Details</h2>

        <!-- Test Case Information -->
        <div class="card">
            <div class="card-header">
                <h5>Test Case Information</h5>
            </div>
            <div class="card-body">
                <ul>
                    <!-- Add th: prefix to reference Thymeleaf model attributes -->
                    <li><strong>Deadline:</strong> <span th:text="${testCase.deadline}"></span></li>
                    <li><strong>Date Updated:</strong> <span th:text="${testCase.dateUpdated}"></span></li>
                    <li><strong>Description:</strong> <span th:text="${testCase.description}"></span></li>
                    <li><strong>Project ID:</strong> <span th:text="${testCase.projectId}"></span></li>
                    <li><strong>Reason:</strong> <span th:text="${testCase.reason}"></span></li>
                    <li><strong>Status:</strong> <span th:text="${testCase.status}"></span></li>
                    <li><strong>Test Case ID:</strong> <span th:text="${testCase.testCaseId}"></span></li>
                    <li><strong>Test Case Name:</strong> <span th:text="${testCase.testCaseName}"></span></li>
                </ul>
            </div>
        </div>

        <!-- Actions -->
        <div class="mt-3">
            <h5>Actions</h5>
            
            <!-- Button to View Approval Status -->
            <button type="button" class="btn btn-primary" onclick="getViewApprovalStatus('${testCase.testCaseId}')">
                View Approval Status <i class="bi bi-eye"></i>
            </button>

            <!-- Add other buttons for your actions (e.g., Approve, Reject) -->

        </div>
    </div>

    <script defer src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <script>
        // Function to get and display approval status
        function getViewApprovalStatus(testCaseId) {
            // You need to implement the logic to get the approval status based on testCaseId
            // For demonstration, let's assume there's a function `getApprovalStatusById` in your backend
            $.ajax({
                type: 'GET',
                url: '/getApprovalStatus/' + testCaseId,  // Update the URL based on your backend endpoint
                success: function (approvalStatus) {
                    // Display the approval status (you can customize this part based on your needs)
                    alert('Approval Status: ' + approvalStatus);
                },
                error: function (error) {
                    console.error('Error getting approval status:', error);
                }
            });
        }
    </script>
</body>

</html>

